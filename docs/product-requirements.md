# AI4Edu 产品需求文档

## 产品定位

一款面向 K12 教育工作者的 AI 智能助手，通过纯自然语言交互，简化教学工作中的重复性任务，提升教学效率。

## 核心交互模式

### 纯自然语言界面
- **无传统导航栏**：用户通过对话与 AI 交互
- **意图自动识别**：系统根据用户输入自动分配对应 Agent
- **Agent 显式调用**：用户可通过 `@AgentName` 直接指定 Agent
- **流式响应**：AI 回复实时流式显示

### 界面组成

```
┌────────────────────────────────────────────────────────────┐
│  [Logo]  AI4Edu                              [设置] [关于]  │
├──────────────────┬─────────────────────────────────────────┤
│                  │                                         │
│  📌 快捷入口      │     🤖 对话区                          │
│  ───────────────  │                                         │
│  📝 出题          │  User: 帮我出一套初三数学月考试卷       │
│  📄 出卷          │                                         │
│  📋 教案          │  Assistant: 好的，我来帮您...           │
│  📊 排座位        │  [正在思考...]                          │
│  📝 评语          │                                         │
│  📖 论文          │                                         │
│                  │                                         │
│  📜 历史记录      │                                         │
│  ───────────────  │  ┌─────────────────────────────────┐   │
│  > 数学月考试卷   │  │  [输入框] [发送] [附件] [语音]   │   │
│  > 期中评语...    │  └─────────────────────────────────┘   │
│  > 教案：二次函数 │                                         │
│                  │                                         │
└──────────────────┴─────────────────────────────────────────┘
```

## 功能场景

### 1. 出题 Agent (QuestionAgent)

**功能描述**：根据知识点自动生成练习题

**输入示例**：
- "给我出5道关于二次函数的填空题，难度中等"
- "生成10道小学三年级数学应用题，关于分数"
- "出3道高中物理力学选择题，要有详细解析"

**输出格式**：
- 题目 + 答案 + 解析
- 支持导出 Word/PDF
- 支持直接复制到剪贴板

**参数**：
- 学科：数学/语文/英语/物理/化学/...
- 年级：小学/初中/高中 + 具体年级
- 题型：选择/填空/解答/应用
- 难度：易/中/难
- 数量：题目数量
- 知识点：具体内容

### 2. 出卷 Agent (ExamAgent)

**功能描述**：生成完整的考试试卷

**输入示例**：
- "生成一份初二数学期中试卷，满分100，时长90分钟"
- "出一套人教版初三英语月考卷，包含听力材料"
- "生成高三理综模拟卷，难度贴近高考"

**输出格式**：
- 完整试卷（密封线、得分栏、题目、答题区）
- 参考答案
- 评分标准
- 听力材料（如需要）

**参数**：
- 试卷类型：期中/期末/月考/模拟
- 总分：默认100/120/150
- 时长：分钟
- 题型分布：选择题X道、填空Y道...
- 范围：章节/知识点

### 3. 教案 Agent (LessonAgent)

**功能描述**：生成完整教学教案

**输入示例**：
- "写一份初中物理'浮力'的教案，45分钟"
- "生成高中语文《荷塘月色》两课时教案"
- "设计一个关于环保的跨学科项目式学习教案"

**输出格式**：
- 教学目标（三维目标/核心素养）
- 教学重难点
- 教学准备
- 教学过程（导入、新授、练习、小结、作业）
- 板书设计
- 教学反思模板

**参数**：
- 学科
- 课题/知识点
- 课时数
- 课型：新授/复习/实验/...
- 教学方法

### 4. 评语 Agent (ReviewAgent)

**功能描述**：批量生成学生评语

**输入示例**：
- "给这30个学生写期末评语，风格亲切鼓励" + [学生名单]
- "根据成绩表生成针对性评语" + [成绩数据]
- "写10条关于课堂积极发言的评语"

**输出格式**：
- 每条评语对应一个学生
- 支持批量导出 Excel
- 支持评语模板库

**参数**：
- 评语类型：期末/阶段性/特定表现
- 风格：亲切/正式/鼓励/严格
- 字数：50字/100字/自定义
- 维度：学习/纪律/品德/特长

### 5. 排座位 Agent (SeatAgent)

**功能描述**：智能生成班级座位表

**输入示例**：
- "给初二(3)班排座位，6列8行，要照顾近视同学"
- "根据成绩互补原则排座位" + [学生成绩]
- "生成每月轮换座位表，避免固定搭配"

**输出格式**：
- 可视化座位图
- 学生姓名标注
- 可导出图片/Excel
- 支持手动调整

**参数**：
- 班级人数
- 行列数
- 策略：随机/互补/轮换/约束条件
- 特殊需求：近视/身高/纪律

### 6. 论文 Agent (PaperAgent)

**功能描述**：辅助撰写教育论文

**输入示例**：
- "帮我写一篇关于'双减'政策下作业设计的论文大纲"
- "写一段关于项目式学习在数学教学中的应用的研究背景"
- "生成教育论文的文献综述框架"

**输出格式**：
- 论文结构（摘要、关键词、正文、参考文献）
- 各段落内容
- 参考文献格式
- 查重风险提示

**参数**：
- 论文类型：教学研究/教育叙事/案例分析
- 主题/关键词
- 字数要求
- 格式规范：APA/GB/T 7714

## 便捷入口设计

### 快捷操作卡片

每个 Agent 有一个快捷入口卡片，点击后弹出预设模板：

```
┌─────────────────────────┐
│  📝 出题                 │
│  ─────────────────────  │
│  [学科] ▼ [年级] ▼      │
│  [题型] ▼ [难度] ▼      │
│  知识点: [________]     │
│  数量: [__] 道          │
│                         │
│  [快速生成] [高级设置]   │
└─────────────────────────┘
```

### 最近使用
- 记录最近使用的快捷操作
- 一键复用历史参数

## 历史记录功能

### 会话列表
- 按时间倒序排列
- 显示会话标题（AI 自动生成或用户指定）
- 显示使用的 Agent 类型图标
- 支持搜索历史会话

### 会话管理
- 收藏重要会话
- 删除历史记录
- 导出会话内容
- 从历史继续对话

## 系统设置

### 模型配置
- API Key 设置
- 模型选择（GPT-4/GPT-3.5/本地模型）
- 温度参数调节
- 最大 token 限制

### MCP Skills
- 查看已安装 Skills
- 启用/禁用 Skills
- 添加自定义 MCP Server
- Skill 权限管理

### 数据管理
- 数据导出
- 清理历史记录
- 备份与恢复

### 界面设置
- 主题：浅色/深色/跟随系统
- 字体大小
- 语言选择

## 用户场景示例

### 场景1：老师准备期中考试
```
User: 我要准备初二期中考试
AI: 我来帮您。请问您需要：
     1. 生成期中考试试卷
     2. 出题组卷
     3. 其他帮助

User: 生成试卷，数学，满分100，90分钟
AI: 好的，正在生成初二数学期中试卷...
     [生成中...]
     试卷已生成，包含：
     - 选择题 10道
     - 填空题 8道
     - 解答题 6道
     
     是否需要：
     [下载Word] [下载PDF] [调整题目]
```

### 场景2：期末评语撰写
```
User: @评语Agent 帮我写期末评语
AI: 请提供学生信息，您可以：
     1. 上传学生名单Excel
     2. 直接粘贴学生姓名
     3. 根据成绩生成

User: [上传 students.xlsx]
AI: 已读取30位学生信息。请设置评语风格：
     [亲切鼓励] [正式中肯] [针对性强]

User: 亲切鼓励风格，每人80字左右
AI: 正在生成评语...
     [进度条]
     已生成30条评语，[查看] [导出Excel]
```

### 场景3：智能排座位
```
User: 帮我排一下班级座位
AI: 请告诉我：
     - 班级人数
     - 座位布局（几列几行）
     - 是否有特殊要求

User: 48人，6列8行，近视的同学坐前排
AI: 收到。请提供学生名单和视力信息...
     或者我可以随机排列后您再调整？

User: 先随机排
AI: [生成座位图可视化]
     您可以直接拖拽调整，确认后导出。
```

## 非功能性需求

### 性能
- 启动时间 < 2秒
- 对话响应 < 1秒（首字）
- 流式输出流畅

### 可靠性
- 自动保存对话
- 网络中断恢复
- 本地优先，离线可用

### 可扩展性
- 新 Agent 可插件化添加
- MCP Skills 动态加载
- 主题/模板可定制

### 安全性
- API Key 本地加密存储
- 敏感数据不泄露
- 无遥测数据上传

## 未来扩展

- [ ] 学生端接入（作业辅导）
- [ ] 家长端接入（学情分析）
- [ ] 多模态（图片题识别）
- [ ] 语音交互
- [ ] 云端同步
- [ ] 团队协作
- [ ] 数据分析报表
